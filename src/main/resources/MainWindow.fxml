<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="700.0" prefWidth="1100.0" xmlns="http://javafx.com/javafx/20.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.ratingsystem.ui.MainController" stylesheets="@styles.css">
    <top>
        <VBox>
            <MenuBar fx:id="menuBar">
                <Menu text="Ð¤Ð°Ð¹Ð»">
                    <MenuItem text="Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð² PDF" onAction="#handleExportToPDF" />
                    <SeparatorMenuItem />
                    <MenuItem text="Ð’Ñ‹Ñ…Ð¾Ð´ Ð² Ð¼ÐµÐ½ÑŽ Ð²Ñ…Ð¾Ð´Ð°" onAction="#handleBackToLogin" />
                    <MenuItem text="Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ" onAction="#handleExit" />
                </Menu>
                <Menu text="Ð”Ð°Ð½Ð½Ñ‹Ðµ">
                    <MenuItem text="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ" onAction="#handleCreateGroup" />
                    <MenuItem text="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ" onAction="#handleDeleteGroup" />
                    <MenuItem text="Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ" />
                </Menu>
            </MenuBar>
            <HBox spacing="10.0" style="-fx-padding: 10px; -fx-background-color: -surface-light;">
                <Label fx:id="userLabel" text="ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ:" styleClass="user-label" />
            </HBox>
        </VBox>
    </top>
    
    <center>
        <TabPane fx:id="tabPane" tabClosingPolicy="UNAVAILABLE">
            <Tab text="Ð“Ñ€ÑƒÐ¿Ð¿Ñ‹">
                <VBox spacing="10.0" style="-fx-padding: 10px;">
                    <Label text="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð³Ñ€ÑƒÐ¿Ð¿Ð°Ð¼Ð¸:" styleClass="section-header" />
                    <HBox spacing="10.0" prefHeight="40.0">
                        <Button fx:id="createGroupBtn" text="âž• Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ" onAction="#handleCreateGroup" styleClass="button-primary" style="-fx-min-width: 150;" />
                        <Button fx:id="deleteGroupBtn" text="ðŸ—‘ï¸ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ" onAction="#handleDeleteGroup" styleClass="button-danger" style="-fx-min-width: 150;" />
                        <Button text="ðŸ“„ Ð¡Ð²Ð¾Ð´ÐºÐ° (PDF)" onAction="#handleExportToPDF" styleClass="button-secondary" style="-fx-min-width: 150;" />
                        <Button text="ðŸ“Š ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚ (PDF)" onAction="#handleExportFullReport" styleClass="button-secondary" style="-fx-min-width: 150;" />
                    </HBox>
                    <ScrollPane fitToWidth="true" fitToHeight="true" style="-fx-fit-to-width: true;">
                        <TableView fx:id="groupsTable" prefHeight="400.0" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="groupCodeColumn" text="ÐšÐ¾Ð´ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹" prefWidth="400.0" />
                                <TableColumn fx:id="studentCountColumn" text="Ð¡Ñ‚ÑƒÐ´ÐµÐ½Ñ‚Ð¾Ð²" prefWidth="300.0" />
                                <TableColumn fx:id="disciplineCountColumn" text="Ð”Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½" prefWidth="300.0" />
                            </columns>
                            <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                        </TableView>
                    </ScrollPane>
                </VBox>
            </Tab>
            
            <Tab text="Ð”Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ñ‹">
                <VBox spacing="10.0" style="-fx-padding: 10px;">
                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ -->
                    <HBox spacing="10.0">
                        <Button fx:id="addDisciplineBtn" text="âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð´Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ñƒ" onAction="#handleAddDiscipline" styleClass="button-primary" style="-fx-min-width: 160;" />
                        <Button fx:id="editDisciplineBtn" text="âœï¸ ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ñ‚ÑŒ" onAction="#handleEditDiscipline" styleClass="button-secondary" style="-fx-min-width: 160;" />
                        <Button fx:id="deleteDisciplineBtn" text="âž– Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð´Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ñƒ" onAction="#handleDeleteDiscipline" styleClass="button-danger" style="-fx-min-width: 160;" />
                        <Separator orientation="VERTICAL" />
                    </HBox>
                    
                    <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ -->
                    <HBox spacing="10.0" VBox.vgrow="ALWAYS">
                        <!-- Ð›ÐµÐ²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ: Ð“Ñ€ÑƒÐ¿Ð¿Ñ‹ -->
                        <VBox spacing="8.0" prefWidth="300.0" style="-fx-border-color: #E5E7EB; -fx-border-width: 1; -fx-border-radius: 4; -fx-padding: 8;">
                            <Label text="Ð“Ñ€ÑƒÐ¿Ð¿Ñ‹:" styleClass="section-header" />
                            <ListView fx:id="groupListView" prefHeight="450.0" prefWidth="300.0" />
                        </VBox>
                        
                        <!-- Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ: Ð”Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ñ‹ -->
                        <VBox spacing="8.0" prefWidth="320.0" style="-fx-border-color: #E5E7EB; -fx-border-width: 1; -fx-border-radius: 4; -fx-padding: 8;">
                            <Label text="Ð”Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ñ‹:" styleClass="section-header" />
                            <ListView fx:id="disciplineListView" prefHeight="450.0" prefWidth="320.0" />
                        </VBox>
                        
                        <!-- ÐŸÑ€Ð°Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ: Ð ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ð¸ ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚Ð¾Ð² -->
                        <VBox spacing="8.0" VBox.vgrow="ALWAYS" style="-fx-border-color: #E5E7EB; -fx-border-width: 1; -fx-border-radius: 4; -fx-padding: 8;">
                            <Label text="Ð ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ð¸ ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚Ð¾Ð²:" styleClass="section-header" />
                            <HBox spacing="8.0" prefHeight="35.0">
                                <Button fx:id="addRatingBtn" text="âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ" onAction="#handleAddRating" styleClass="button-primary" style="-fx-min-width: 100;" />
                                <Button fx:id="editRatingBtn" text="âœï¸ Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ" onAction="#handleEditRating" styleClass="button-secondary" style="-fx-min-width: 120;" />
                                <Button fx:id="deleteRatingBtn" text="âž– Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ" onAction="#handleDeleteRating" styleClass="button-danger" style="-fx-min-width: 100;" />
                            </HBox>
                            <ScrollPane fitToWidth="true" fitToHeight="true">
                                <TableView fx:id="ratingsTable" prefHeight="400.0" VBox.vgrow="ALWAYS">
                                    <columns>
                                        <TableColumn fx:id="studentNumColumn" text="â„–" prefWidth="50.0" />
                                        <TableColumn fx:id="studentNameColumn" text="Ð¤Ð˜Ðž Ð¡Ñ‚ÑƒÐ´ÐµÐ½Ñ‚Ð°" prefWidth="300.0" />
                                        <TableColumn fx:id="ratingColumn" text="Ð ÐµÐ¹Ñ‚Ð¸Ð½Ð³" prefWidth="100.0" />
                                    </columns>
                                    <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                                </TableView>
                            </ScrollPane>
                        </VBox>
                    </HBox>
                </VBox>
            </Tab>
            
            <Tab text="Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ñ„Ð°Ð¹Ð»Ð°" onSelectionChanged="#handleTabChanged">
                <TextArea fx:id="contentArea" editable="false" prefHeight="600.0" prefWidth="900.0" wrapText="true" style="-fx-font-size: 11px; -fx-font-family: 'Monaco', 'Consolas', monospace;" />
            </Tab>
            
            <Tab fx:id="usersTab" text="ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸">
                <VBox spacing="10.0" style="-fx-padding: 10px;">
                    <Label text="Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹:" style="-fx-font-weight: bold; -fx-font-size: 13px;" />
                    <HBox spacing="10.0">
                        <Button fx:id="deleteUserBtn" text="ðŸ—‘ï¸ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ" onAction="#handleDeleteUser" styleClass="button-danger" style="-fx-min-width: 180;" />
                        <Button text="ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº" onAction="#loadUsers" styleClass="button-secondary" style="-fx-min-width: 150;" />
                    </HBox>
                    <TableView fx:id="usersTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="userIdColumn" text="ID" prefWidth="50.0" />
                            <TableColumn fx:id="userNameColumn" text="Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ" prefWidth="200.0" />
                            <TableColumn fx:id="userRoleColumn" text="Ð Ð¾Ð»ÑŒ" prefWidth="150.0" />
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="Ðž Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ðµ">
                <VBox spacing="20.0" style="-fx-padding: 30px; -fx-alignment: TOP_CENTER;">
                    <Label text="Rating System" style="-fx-font-size: 32px; -fx-font-weight: 900; -fx-text-fill: -primary-color;" />
                    <Label text="Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ð°Ð¼Ð¸ Ð°Ñ‚Ñ‚ÐµÑÑ‚Ð°Ñ†Ð¸Ð¸" style="-fx-font-size: 16px; -fx-font-weight: 700;" />
                    <Separator />
                    
                    <VBox spacing="10.0">
                        <Label text="Ð’ÐµÑ€ÑÐ¸Ñ:" style="-fx-font-weight: bold;" />
                        <Label text="1.0.0" style="-fx-text-fill: #6B7280;" />
                    </VBox>
                    
                    <VBox spacing="10.0">
                        <Label text="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:" style="-fx-font-weight: bold;" />
                        <Label text="ÐšÑ€Ð¾ÑÑÐ¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼ÐµÐ½Ð½Ð¾Ðµ Ð´ÐµÑÐºÑ‚Ð¾Ð¿Ð½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ð¾Ð²Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ Ð¿Ñ€Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð°Ñ‚Ñ‚ÐµÑÑ‚Ð°Ñ†Ð¸Ð¸. ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ Ð³Ñ€ÑƒÐ¿Ð¿Ð°Ð¼Ð¸, Ð´Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ð°Ð¼Ð¸, Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ð°Ð¼Ð¸ ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚Ð¾Ð² Ð¸ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² PDF." wrapText="true" style="-fx-text-fill: #6B7280; -fx-font-size: 12px;" />
                    </VBox>
                    
                    <VBox spacing="10.0">
                        <Label text="Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ:" style="-fx-font-weight: bold;" />
                        <Label text="â€¢ ÐÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ€Ð¾Ð»ÑÐ¼Ð¸
â€¢ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð³Ñ€ÑƒÐ¿Ð¿Ð°Ð¼Ð¸ Ð¸ Ð´Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ð°Ð¼Ð¸
â€¢ Ð’Ð²Ð¾Ð´ Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ð¾Ð²
â€¢ Ð Ð°ÑÑ‡Ñ‘Ñ‚ ÑÑ€ÐµÐ´Ð½Ð¸Ñ… Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ð¾Ð²
â€¢ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² PDF
â€¢ ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° PostgreSQL
â€¢ ÐšÑ€Ð¾ÑÑÐ¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ" wrapText="true" style="-fx-text-fill: #6B7280; -fx-font-size: 12px;" />
                    </VBox>
                    
                    <Separator />
                    <Button text="Ð’Ñ‹Ñ…Ð¾Ð´ Ð² Ð¼ÐµÐ½ÑŽ Ð²Ñ…Ð¾Ð´Ð°" onAction="#handleBackToLogin" styleClass="button-secondary" style="-fx-min-width: 200; -fx-padding: 12px;" />
                </VBox>
            </Tab>
        </TabPane>
    </center>
</BorderPane>
